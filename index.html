<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Red Neuronal Netflix</title>
    <link rel="stylesheet" href="style/style.css" />
  </head>
  <body>
    <div class="container">
      <div
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 15px;
        "
      >
        <h1 style="margin: 0">ğŸ¬ Red Neuronal Netflix</h1>
        <a
          href="https://www.youtube.com/@aprendamoscodigo25"
          target="_blank"
          style="text-decoration: none"
        >
          <img
            src="images/aprendamoscodigo.png"
            alt="Aprendamos CÃ³digo"
            style="height: 150px; width: auto; transition: transform 0.3s ease"
            onmouseover="this.style.transform='scale(1.1)'"
            onmouseout="this.style.transform='scale(1)'"
          />
        </a>
      </div>
      <p class="subtitle">PredicciÃ³n: Â¿El usuario verÃ¡ la pelÃ­cula completa?</p>

      <!-- Layout principal con red neuronal y controles -->
      <div class="main-layout">
        <!-- SecciÃ³n izquierda: InformaciÃ³n de capas -->
        <div class="left-panel">
          <div class="layer-info-card">
            <div class="card-header">
              <span class="icon">ğŸ“Š</span>
              <h3>Entradas (Features)</h3>
            </div>
            <ul class="feature-list">
              <li>
                <strong>GÃ©nero favorito:</strong> 0.8 (GÃ©nero favorito (0.8))
              </li>
              <li><strong>Rating pelÃ­cula:</strong> 0.9 (4.5/5 estrellas)</li>
              <li><strong>DuraciÃ³n:</strong> 0.6 (132 minutos)</li>
              <li><strong>Hora del dÃ­a:</strong> 0.7 (19:00 hrs)</li>
              <li><strong>DÃ­a semana:</strong> 0.9 (SÃ¡bado)</li>
            </ul>
          </div>

          <div class="layer-info-card">
            <div class="card-header">
              <span class="icon">ğŸ§ </span>
              <h3>Nodos: Cada nodo es una neurona</h3>
            </div>
            <div class="layer-desc">
              <p>
                <strong>Capa 1:</strong> Detecta patrones bÃ¡sicos (preferencias
                + contexto)
              </p>
              <p>
                <strong>Capa 2:</strong> Combina patrones complejos
                (comportamiento de visualizaciÃ³n)
              </p>
            </div>
          </div>

          <div class="layer-info-card">
            <div class="card-header">
              <span class="icon">ğŸ¯</span>
              <h3>Salida: Genera el resultado final de la red</h3>
            </div>
            <div class="layer-desc">
              <p><strong>Probabilidad:</strong> Â¿VerÃ¡ pelÃ­cula completa?</p>
              <p><strong>Rango:</strong> 0.0 (No verÃ¡) - 1.0 (VerÃ¡ completa)</p>
            </div>
          </div>
        </div>

        <!-- SecciÃ³n central: Red neuronal -->
        <div class="center-panel">
          <div class="network-container" id="networkContainer">
            <!-- La red se genera dinÃ¡micamente -->
          </div>
        </div>

        <!-- SecciÃ³n derecha: Controles interactivos -->
        <div class="right-panel">
          <div class="controls-card">
            <div class="card-header">
              <span class="icon">ğŸ›ï¸</span>
              <h3>Controles Interactivos</h3>
            </div>

            <div class="compact-controls">
              <div class="control-item">
                <label>GÃ©nero Favorito (0-1):</label>
                <div class="slider-container">
                  <input
                    type="range"
                    id="genero"
                    min="0"
                    max="1"
                    step="0.1"
                    value="0.8"
                    oninput="updateInput('genero', this.value)"
                  />
                  <span class="value-badge" id="genero-value">0.8</span>
                </div>
                <small>0=No le gusta, 1=Le encanta</small>
              </div>

              <div class="control-item">
                <label>Rating PelÃ­cula (0-1):</label>
                <div class="slider-container">
                  <input
                    type="range"
                    id="rating"
                    min="0"
                    max="1"
                    step="0.1"
                    value="0.9"
                    oninput="updateInput('rating', this.value)"
                  />
                  <span class="value-badge" id="rating-value">0.9</span>
                </div>
                <small>0=Muy malo, 1=Excelente</small>
              </div>

              <div class="control-item">
                <label>DuraciÃ³n (0-1):</label>
                <div class="slider-container">
                  <input
                    type="range"
                    id="duracion"
                    min="0"
                    max="1"
                    step="0.1"
                    value="0.6"
                    oninput="updateInput('duracion', this.value)"
                  />
                  <span class="value-badge" id="duracion-value">0.6</span>
                </div>
                <small>0=Muy corta, 1=Muy larga</small>
              </div>

              <div class="control-item">
                <label>Hora del DÃ­a (0-1):</label>
                <div class="slider-container">
                  <input
                    type="range"
                    id="hora"
                    min="0"
                    max="1"
                    step="0.1"
                    value="0.7"
                    oninput="updateInput('hora', this.value)"
                  />
                  <span class="value-badge" id="hora-value">0.7</span>
                </div>
                <small>0=Madrugada, 1=Noche</small>
              </div>

              <div class="control-item">
                <label>DÃ­a Semana (0-1):</label>
                <div class="slider-container">
                  <input
                    type="range"
                    id="dia"
                    min="0"
                    max="1"
                    step="0.1"
                    value="0.9"
                    oninput="updateInput('dia', this.value)"
                  />
                  <span class="value-badge" id="dia-value">0.9</span>
                </div>
                <small>0=Lunes, 1=Fin de semana</small>
              </div>
            </div>

            <div class="validation-messages" id="validationMessages"></div>

            <div class="action-buttons">
              <button class="btn-primary" onclick="simulateForwardPass()">
                ğŸš€ Simular PredicciÃ³n
              </button>
              <button class="btn-secondary" onclick="resetNetwork()">
                ğŸ”„ Reiniciar
              </button>
              <button
                class="btn-download"
                onclick="downloadPDF()"
                id="downloadBtn"
                style="display: none"
              >
                ğŸ“„ Descargar PDF
              </button>
            </div>
          </div>
        </div>
      </div>

      <div
        id="predictionResult"
        class="prediction-result"
        style="display: none"
      >
        <div id="resultText"></div>
      </div>

      <!-- FÃ³rmula matemÃ¡tica de la red neuronal -->
      <div class="formula-section">
        <div class="formula-header">
          <span class="formula-icon">ğŸ“</span>
          <h3>FÃ³rmula MatemÃ¡tica de la Red Neuronal</h3>
        </div>

        <div class="formula-container">
          <div class="formula-step">
            <h4>1. Capa de Entrada (Input Layer)</h4>
            <div class="formula">
              <strong>X = [xâ‚, xâ‚‚, xâ‚ƒ, xâ‚„, xâ‚…]</strong>
            </div>
            <p>Donde: xâ‚=GÃ©nero, xâ‚‚=Rating, xâ‚ƒ=DuraciÃ³n, xâ‚„=Hora, xâ‚…=DÃ­a</p>
          </div>

          <div class="formula-step">
            <h4>2. Primera Capa Oculta (Hidden Layer 1)</h4>
            <div class="formula">
              <strong>Hâ‚â±¼ = Ïƒ(âˆ‘áµ¢â‚Œâ‚âµ wáµ¢â±¼â½Â¹â¾ Â· xáµ¢ + bâ‚â±¼)</strong>
            </div>
            <p>Para j = 1, 2, 3, 4 neuronas en la primera capa oculta</p>
          </div>

          <div class="formula-step">
            <h4>3. Segunda Capa Oculta (Hidden Layer 2)</h4>
            <div class="formula">
              <strong>Hâ‚‚â‚– = Ïƒ(âˆ‘â±¼â‚Œâ‚â´ wâ±¼â‚–â½Â²â¾ Â· Hâ‚â±¼ + bâ‚‚â‚–)</strong>
            </div>
            <p>Para k = 1, 2, 3 neuronas en la segunda capa oculta</p>
          </div>

          <div class="formula-step">
            <h4>4. Capa de Salida (Output Layer)</h4>
            <div class="formula">
              <strong>y = Ïƒ(âˆ‘â‚–â‚Œâ‚Â³ wâ‚–â½Â³â¾ Â· Hâ‚‚â‚– + bâ‚ƒ)</strong>
            </div>
            <p>Probabilidad final de ver la pelÃ­cula completa (0 â‰¤ y â‰¤ 1)</p>
          </div>

          <div class="formula-step activation">
            <h4>5. FunciÃ³n de ActivaciÃ³n (Sigmoid)</h4>
            <div class="formula">
              <strong>Ïƒ(z) = 1 / (1 + eâ»á¶»)</strong>
            </div>
            <p>Convierte cualquier valor real en un rango [0, 1]</p>
          </div>
        </div>

        <div class="simplified-formula">
          <h4>ğŸ“Š FÃ³rmula Simplificada para esta Demo:</h4>
          <div class="formula">
            <strong
              >PredicciÃ³n = Ïƒ(0.25Â·GÃ©nero + 0.30Â·Rating - 0.15Â·DuraciÃ³n +
              0.20Â·Hora + 0.20Â·DÃ­a + 0.2)</strong
            >
          </div>
          <p>
            <em>Los pesos estÃ¡n simplificados para propÃ³sitos educativos</em>
          </p>
        </div>
      </div>

      <div class="info-panel">
        <h3>ğŸ” Â¿CÃ³mo funciona?</h3>
        <p>
          <strong>1. Entradas:</strong> Datos del usuario y pelÃ­cula (gÃ©nero
          preferido, rating, duraciÃ³n, contexto temporal)
        </p>
        <p>
          <strong>2. Pesos:</strong> Valores aprendidos que determinan la
          importancia de cada conexiÃ³n
        </p>
        <p>
          <strong>3. Capas Ocultas:</strong> Procesan y combinan informaciÃ³n
          para encontrar patrones complejos
        </p>
        <p>
          <strong>4. Salida:</strong> Probabilidad final de que el usuario vea
          la pelÃ­cula completa
        </p>
      </div>
    </div>

    <!-- LibrerÃ­as para generar PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>
